<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Multi-Label Lyric Emotion Detection</title>
	<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
	<link rel="icon" href="/static/img/icon.ico" type="image/x-icon"/>
		<!-- Fonts and icons -->
	<script src="/static/js/plugin/webfont/webfont.min.js"></script>
	<script>
		WebFont.load({
			google: {"families":["Lato:300,400,700,900"]},
			custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['/static/css/fonts.min.css']},
			active: function() {
				sessionStorage.fonts = true;
			}
		});
	</script>

	<!-- CSS Files -->
	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/css/atlantis.min.css">

	<!-- CSS Just for demo purpose, don't include it in your project -->
	<link rel="stylesheet" href="/static/css/demo.css">
	<link rel="stylesheet" href="static/min/jquery.sweet-modal.min.css" />
</head>
<body>
	<!-- loading -->
	<div id="divLoading" style="margin: 0px; padding: 0px; position: fixed; right: 0px; top: 0px; width: 100%; height: 100%; background-color: rgb(102, 102, 102); z-index: 30001; opacity: 0.8;">
		<p style="position: absolute; color: White; top: 45%; left: 47%;">
		Loading, please wait...
		</p>
		<div class="loader loader-lg" style="position: absolute; top: 40%; left: 50%;
		border-top-color: rgb(255, 255, 255);
			border-top-style: solid;
			border-top-width: 3px;
			border-right-color: rgb(255, 255, 255);
			border-right-style: solid;
			border-right-width: 3px;
			border-bottom-color: transparent;
			border-bottom-style: solid;
			border-bottom-width: 3px;
			border-left-color: rgb(255, 255, 255);
			border-left-style: solid;
			border-left-width: 3px;
			border-image-source: initial;
			border-image-slice: initial;
			border-image-width: initial;
			border-image-outset: initial;
			border-image-repeat: initial;
		"></div>
	</div>
	<div class="wrapper">
		<div class="main-header">
			<!-- Logo Header -->

			<!-- Navbar Header -->
			<nav class="navbar navbar-header navbar-expand-lg" data-background-color="blue2">
				<div class="container-fluid">

				</div>
			</nav>
			<!-- End Navbar -->
		</div>

		<!-- Sidebar -->
		<div class="sidebar sidebar-style-2">
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
				<div class="sidebar-content">
					<ul class="nav nav-primary">
						<li class="nav-item">
							<a href="/koleksi">
								<i class="flaticon-folder"></i>
								<p>Input Koleksi Lirik</p>
							</a>
						</li>
						<hr>
						<li class="nav-item active">
							<a href="/">
								<i class="flaticon-settings"></i>
								<p>Proses</p>
							</a>
						</li>
						<hr>
					</ul>
				</div>
			</div>
		</div>
		<!-- End Sidebar -->

		<div class="main-panel">
			<div class="content">
				<div class="panel-header bg-primary-gradient">
					<div class="page-inner py-5">
						<div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
							<div>
								<h2 class="text-white pb-2 fw-bold">Proses Deteksi Emosi</h2>
								<h5 class="text-white op-7 mb-2">Multi-Label Lyric Emotion Detection</h5>
							</div>
							<div class="ml-md-auto py-2 py-md-0">
								<button type="button" class="btn btn-white btn-border btn-round mr-2" name="button" onclick="showLirik()">Pilih Lirik</button>
							</div>
						</div>
					</div>
				</div>
				<div class="page-inner mt--5">
					<!-- <div class="row">
						<div class="col-md-12">
							<div class="card">
								<!-- <div class="card-header">
									<h4>Pilih Lirik</h4>
								</div> -->
								<!-- <div class="card-body">
									<p class="demo">
										<button type="button" class="btn btn-primary" name="button">Pilih Lirik</button>
									</p>
								</div>
							</div>
						</div>
					</div> -->
					<div class="row">
						<div class="col-md-7">
							<div class="card full-height">
								<div class="card-body">
									<ul class="nav nav-pills nav-secondary" id="pills-tab" role="tablist">
										<li class="nav-item submenu">
											<a class="nav-link active show" href="#pills-1" data-toggle="pill" id="pills-1-tab" role="tab" aria-controls="pill-1" aria-selected="true">Lirik</a>
										</li>
										<li class="nav-item submenu">
											<a class="nav-link show" href="#pills-2" data-toggle="pill" id="pills-2-tab" role="tab" aria-controls="pill-2" aria-selected="true">Tokenisasi</a>
										</li>
										<li class="nav-item submenu">
											<a class="nav-link show" href="#pills-3" data-toggle="pill" id="pills-3-tab" role="tab" aria-controls="pill-3" aria-selected="true">Stopwords</a>
										</li>
										<li class="nav-item submenu">
											<a class="nav-link show" href="#pills-4" data-toggle="pill" id="pills-4-tab" role="tab" aria-controls="pill-4" aria-selected="true">Ekstraksi VA</a>
										</li>
										<li class="nav-item submenu">
											<a class="nav-link show" href="#pills-5" data-toggle="pill" id="pills-5-tab" role="tab" aria-controls="pill-5" aria-selected="true">BO VA Words</a>
										</li>
									</ul>
									<div class="tab-content mt-2 mb-3" id="pills-tab-content">
										<div class="tab-pane fade active show" id="pills-1" role="tabpanel" aria-labelledby="pills-1-tab">
											<h4><strong id="pill-1-judul"></strong></h4>
											<p id="pill-1-text"></p>
										</div>
										<div class="tab-pane fade" id="pills-2" role="tabpanel" aria-labelledby="pills-2-tab">
											<p id="pill-2-text"></p>
										</div>
										<div class="tab-pane fade" id="pills-3" role="tabpanel" aria-labelledby="pills-3-tab">
											<p id="pill-3-text"></p>
										</div>
										<div class="tab-pane fade" id="pills-4" role="tabpanel" aria-labelledby="pills-4-tab">
											<p id="pill-4-text"></p>
										</div>
										<div class="tab-pane fade" id="pills-5" role="tabpanel" aria-labelledby="pills-5-tab">
											<h4><strong id="pill-5-judul1"></strong></h4>
											<p id="pill-5-text"></p>
											<h4><strong id="pill-5-judul2"></strong></h4>
											<p id="pill-5-bow"></p>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-5">
							<div class="card full-height">
								<div class="card-body">
									<div class="card-title">Radar Emosi</div>
									<div class="row">
										<div class="col-md-12 d-flex flex-column justify-content-around">
											<canvas id="radarChart" width="300" height="300"></canvas>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- MODAL -->
			<div class="modal fade" id="lirikModal" role="dialog">
		    <div class="modal-dialog">

		      <!-- Modal content-->
		      <div class="modal-content">
		        <div class="modal-header">
							<h4 class="modal-title">Daftar Koleksi</h4>
		          <button type="button" class="close" data-dismiss="modal">&times;</button>
		        </div>
		        <div class="modal-body">
		          <ol class="list-group list-group-bordered list">
								{% for item in data.listdir %}
								<li class="list-group-item"><strong>{{loop.index}} </strong> {{'_'+item}}<button class="btn btn-primary btn-xs" style="margin-left:10px" onclick="proses('{{item}}')">Proses</button></li>
								{% endfor %}
		          </ol>
		        </div>
		        <div class="modal-footer">
		          <button type="button" class="btn btn-default" data-dismiss="modal">Tutup</button>
		        </div>
		      </div>

		    </div>
		  </div>
			<!-- END MODAL -->


			<footer class="footer">
				<div class="container-fluid">
					<nav class="pull-left">
						<ul class="nav">
							<li class="nav-item">
								<a class="nav-link" href="https://www.themekita.com">
									ThemeKita
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#">
									Help
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#">
									Licenses
								</a>
							</li>
						</ul>
					</nav>
					<div class="copyright ml-auto">
						2018, made with <i class="fa fa-heart heart text-danger"></i> by <a href="https://www.themekita.com">ThemeKita</a>
					</div>
				</div>
			</footer>
		</div>
	</div>
	<!--   Core JS Files   -->
	<script src="/static/js/core/jquery.3.2.1.min.js"></script>
	<script src="/static/js/core/popper.min.js"></script>
	<script src="/static/js/core/bootstrap.min.js"></script>

	<!-- jQuery UI -->
	<script src="/static/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="/static/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script src="/static/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>


	<!-- Chart JS -->
	<script src="/static/js/plugin/chart.js/chart.min.js"></script>

	<!-- jQuery Sparkline -->
	<script src="/static/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

	<!-- Chart Circle -->
	<script src="/static/js/plugin/chart-circle/circles.min.js"></script>

	<!-- Datatables -->
	<script src="/static/js/plugin/datatables/datatables.min.js"></script>

	<!-- Bootstrap Notify -->
	<script src="/static/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

	<!-- jQuery Vector Maps -->
	<script src="/static/js/plugin/jqvmap/jquery.vmap.min.js"></script>
	<script src="/static/js/plugin/jqvmap/maps/jquery.vmap.world.js"></script>

	<!-- Sweet Alert -->
	<script src="/static/js/plugin/sweetalert/sweetalert.min.js"></script>

	<!-- Atlantis JS -->
	<script src="/static/js/atlantis.min.js"></script>

	<script src="static/min/jquery.sweet-modal.min.js"></script>
	<script type="text/javascript">
	$(document).ready(function(){
		// var myRadarChart=new Chart()
		var ctx = $('#radarChart');
		var myRadarChart = new Chart(ctx, {
				type: 'radar',
				data: {
								labels: ["Angry","Glad","Happy","Peaceful","Relax","Depressing","Sad","Annoying"],
								datasets: [{
														data: [0,0,0,0,0,0,0,0]
													}]
							},
				options:{
					legend:{
						display:false
					}
				}
		});
		$('#divLoading').hide()
	})
		function showLirik(){
			$('#lirikModal').modal('show')
		}
		function notify (title, msg, type) {
				var placementFrom = $('#notify_placement_from option:selected').val();
				var placementAlign = $('#notify_placement_align option:selected').val();
				var state = $('#notify_state option:selected').val();
				var style = $('#notify_style option:selected').val();
				var content = {};

				content.title = title;
				content.message = msg;
				content.icon = 'fa fa-bell';
				content.url = 'javascript:(0)';
				content.target = '';

				$.notify(content,{
					type: type,
					placement: {
						from: placementFrom,
						align: placementAlign
					},
					time: 1000,
					delay: 5000,
					z_index: 2000
				});
			}
		function proses(judul){
			$('#divLoading').show()
			$.ajax({
				method:'POST',
				dataType:'JSON',
				url:'/proses',
				data:{judul:judul},
				success:(data)=>{
					$('#pill-1-judul').html(data.judul)
					$('#pill-1-text').html(data.isi)
					$('#pill-2-text').html(JSON.stringify(data.tokenisasi,null,3))
					$('#pill-3-text').html(JSON.stringify(data.stopwords,null,3))
					$('#pill-4-text').html(JSON.stringify(data.ekstraksiva,null,3))
					$('#pill-5-judul1').html("Valance Arousal Words Token")
					$('#pill-5-text').html(JSON.stringify(data.vawords,null,3))
					$('#pill-5-judul2').html("Bag of Valance Arousal Words")
					$('#pill-5-bow').html(JSON.stringify(data.bow,null,3))
					temp=[]
					for_radar=[]
					$.each(data.prediction,function(index,value){
							temp.push(parseFloat(value))
					})
					for_radar[0]=temp[2]
					for_radar[1]=temp[1]
					for_radar[2]=temp[0]
					for_radar[3]=temp[7]
					for_radar[4]=temp[6]
					for_radar[5]=temp[5]
					for_radar[6]=temp[4]
					for_radar[7]=temp[3]
					myRadarChart.destroy()
					myRadarChart = new Chart(ctx, {
					    type: 'radar',
					    data: {
									    labels: ["Angry","Glad","Happy","Peaceful","Relax","Depressing","Sad","Annoying"],
									    datasets: [{
									    						data: for_radar
																}]
										},
							options:{
								legend:{
									display:false
								}
							}
					});
					$('#lirikModal').modal('hide')
					$('#divLoading').hide()
				},
				error:(err)=>{
					notify("Gagal","Terjadi kesalahan pada server",'danger')
					$('#divLoading').hide()
				}
			})
		}
	</script>
</body>
</html>
